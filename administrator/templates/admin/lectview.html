{% extends 'root.html' %}
{% load static %}
{% block content %}
{% load crispy_forms_tags %}
<div class="container-fluid">
    <!-- begin row -->
    <div class="row">
        <div class="col-md-12 m-b-30">
            <!-- begin page title -->
            <form method="POST" action="">
                {% csrf_token %}
                
                {% comment %} {{ form|crispy}} {% endcomment %}
                {% comment %} <form> {% endcomment %}
                    <h2>Lecturer's Details</h2>
                    <div class="row g-3 align-items-center">
                        <div class="col-4">
                            <label for="exampleInputid" class="form-label">Lecturer's ID</label>
                            <input type="text" class="form-control" name="id" id="id" aria-describedby="idHelp">
                        </div>
                        <div class="col-4">
                            <label for="exampleInputName" class="form-label">Lecturer's Name</label>
                            <input type="text" class="form-control" name="lecturername" id="exampleInputName">
                        </div>
                        <div class="col-4">
                            <label for="qualification" class="form-label">Qualification</label>
                            <select class="form-control" name="qualification" id="qualification">
                              <option value="">Select Qualification</option>
                              <option value="Bachelors">Degree</option>
                              <option value="Masters">Degree - Masters</option>
                              <option value="PhD">Degree - Masters - PhD</option>
                              </select>
                        </div>
                    </div>
                    <br><br>
                    <div class="row g-3 align-items-center">
                        <div class="col-4">
                            <label for="semester" class="form-label">Semester</label>
                            <select class="form-control" name="semester" id="semester">
                                <option value="">Select Semester</option>
                                <option value="First Semester">First Semester</option>
                                <option value="Second Semester">Second Semester</option>
                            </select>
                        </div> 
                    </div>
                {% comment %} </form> {% endcomment %}
                <br><br>
                <div class="row">
                  <div class="col-md-12">
                      <table class="table table-bordered">
                          <thead>
                              <tr>
                                  <th scope="col">#</th>
                                  <th scope="col">Course Units</th>
                                  <th scope="col">Feedback</th>
                                  <th scope="col">Experience</th>
                                  <th scope="col">Professional Certificate</th>
                                  <th scope="col">Publication</th>
                              </tr>
                          </thead>
                          <tbody id="course_units_body"> <!-- Add this tbody element -->
                            <!-- Table rows will be dynamically added here -->
                          </tbody>
                      </table>
                  </div>
              </div>
            </div>
            <div class="col-12">
                <button type="submit" class="btn btn-primary">Submit</button>
            <a class="btn btn-lg btn-secondary" href="{% url 'lecturer' %}" role="button">Cancel</a>
            </div>
           </form>
            <!-- JavaScript to dynamically update the table -->
            <script>
                document.getElementById("semester").addEventListener("change", function() {
                    var selectedSemester = this.value;
                    var tableBody = document.getElementById("course_units_body");
                    tableBody.innerHTML = ""; // Clear existing rows
            
                    var semester; // Define the variable outside the loop
            
                    {% for course in courses %}
                        {% if course.semester == "First Semester" %}
                            semester = "First Semester"; // Assign the value without var keyword
                        {% elif course.semester == "Second Semester" %}
                            semester = "Second Semester"; // Assign the value without var keyword
                        {% endif %}
                        // Check if semester matches the selected semester
                        if (semester === selectedSemester) {
                            var newRow = "<tr>";
                            newRow += "<td>{{ course.id }}</td>";
                            newRow += "<td>{{ course.coursename }}</td>";
                            newRow += "<td><input type='text' name='feedback[]'></td>";
                            newRow += "<td><select name='experience[]'><option value='2'>2</option><option value='4'>4</option><option value='5'>5</option><option value='6'>6</option></select></td>";
                            newRow += "<td><input type='text' name='certificate[]'></td>";
                            newRow += "<td><select name='publication[]'><option value='2'>2</option><option value='4'>4</option><option value='5'>5</option><option value='10'>10</option></select></td>";
                            newRow += "</tr>";
                            tableBody.innerHTML += newRow;
                        }
                    {% endfor %}
                });
            </script>            
        </div>
    </div>
</div>
{% endblock content %}